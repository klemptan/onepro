{"ast":null,"code":"import { makeAutoObservable, toJS } from \"mobx\";\nexport default class BasketStore {\n  constructor() {\n    let inLS = localStorage.getItem('basketGoods');\n    if (inLS) {\n      this._goods = JSON.parse(inLS);\n    } else {\n      this._goods = [];\n    }\n    this._totalSum = 0;\n    makeAutoObservable(this);\n  }\n  indexOf(goodId) {\n    this._goods.map((m, index) => {\n      if (m.good.id == goodId) return index;\n    });\n    return -1;\n  }\n  setGood(good) {\n    let index = this.indexOf(good.id);\n    if (index != -1) {\n      this._goods[index].amount++;\n    } else {\n      this._goods.push({\n        good: good,\n        amount: 1\n      });\n    }\n    localStorage.setItem('basketGoods', JSON.stringify(this._goods));\n  }\n  unsetGood(goodId, unsetFull) {\n    let index = this.indexOf(goodId);\n    if (unsetFull) {\n      this._goods.splice(index, 1);\n    } else {\n      this._goods[index].amount--;\n    }\n    localStorage.setItem('basketGoods', JSON.stringify(this._goods));\n  }\n  empty() {\n    this._goods = [];\n    localStorage.setItem('basketGoods', JSON.stringify(this._goods));\n  }\n  get goods() {\n    return this._goods;\n  }\n  get totalSum() {\n    let total = 0;\n    this._goods.map(m => {\n      total += m.good.price * m.amount;\n    });\n    return total;\n  }\n}","map":{"version":3,"names":["makeAutoObservable","toJS","BasketStore","constructor","inLS","localStorage","getItem","_goods","JSON","parse","_totalSum","indexOf","goodId","map","m","index","good","id","setGood","amount","push","setItem","stringify","unsetGood","unsetFull","splice","empty","goods","totalSum","total","price"],"sources":["C:/Users/jhokipery/Documents/works/onepro/onepro/client/src/store/BasketStore.js"],"sourcesContent":["import { makeAutoObservable, toJS } from \"mobx\"\n\nexport default class BasketStore {\n    constructor() {\n        let inLS = localStorage.getItem('basketGoods')\n        if (inLS) {\n            this._goods = JSON.parse(inLS)\n        }\n        else {\n            this._goods = []\n        }\n        this._totalSum = 0\n        makeAutoObservable(this)\n    }\n\n    indexOf(goodId) {\n        this._goods.map((m, index) => {\n            if (m.good.id == goodId)\n                return index\n        })\n\n        return -1;\n    }\n\n    setGood(good) {\n        let index = this.indexOf(good.id)\n        if (index != -1) {\n            this._goods[index].amount++\n        }\n        else {\n            this._goods.push({\n                good: good,\n                amount: 1\n            })\n        }\n        localStorage.setItem('basketGoods', JSON.stringify(this._goods))\n    }\n\n    unsetGood(goodId, unsetFull) {\n        let index = this.indexOf(goodId)\n        if (unsetFull) {\n            this._goods.splice(index, 1)\n        }\n        else {\n            this._goods[index].amount--\n        }\n        localStorage.setItem('basketGoods', JSON.stringify(this._goods))\n    }\n\n    empty() {\n        this._goods = []\n        localStorage.setItem('basketGoods', JSON.stringify(this._goods))\n    }\n\n    get goods() {\n        return this._goods\n    }\n\n    get totalSum() {\n        let total = 0\n        this._goods.map((m) => {\n            total += m.good.price * m.amount\n        })\n        return total\n    }\n}"],"mappings":"AAAA,SAASA,kBAAkB,EAAEC,IAAI,QAAQ,MAAM;AAE/C,eAAe,MAAMC,WAAW,CAAC;EAC7BC,WAAW,GAAG;IACV,IAAIC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;IAC9C,IAAIF,IAAI,EAAE;MACN,IAAI,CAACG,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC;IAClC,CAAC,MACI;MACD,IAAI,CAACG,MAAM,GAAG,EAAE;IACpB;IACA,IAAI,CAACG,SAAS,GAAG,CAAC;IAClBV,kBAAkB,CAAC,IAAI,CAAC;EAC5B;EAEAW,OAAO,CAACC,MAAM,EAAE;IACZ,IAAI,CAACL,MAAM,CAACM,GAAG,CAAC,CAACC,CAAC,EAAEC,KAAK,KAAK;MAC1B,IAAID,CAAC,CAACE,IAAI,CAACC,EAAE,IAAIL,MAAM,EACnB,OAAOG,KAAK;IACpB,CAAC,CAAC;IAEF,OAAO,CAAC,CAAC;EACb;EAEAG,OAAO,CAACF,IAAI,EAAE;IACV,IAAID,KAAK,GAAG,IAAI,CAACJ,OAAO,CAACK,IAAI,CAACC,EAAE,CAAC;IACjC,IAAIF,KAAK,IAAI,CAAC,CAAC,EAAE;MACb,IAAI,CAACR,MAAM,CAACQ,KAAK,CAAC,CAACI,MAAM,EAAE;IAC/B,CAAC,MACI;MACD,IAAI,CAACZ,MAAM,CAACa,IAAI,CAAC;QACbJ,IAAI,EAAEA,IAAI;QACVG,MAAM,EAAE;MACZ,CAAC,CAAC;IACN;IACAd,YAAY,CAACgB,OAAO,CAAC,aAAa,EAAEb,IAAI,CAACc,SAAS,CAAC,IAAI,CAACf,MAAM,CAAC,CAAC;EACpE;EAEAgB,SAAS,CAACX,MAAM,EAAEY,SAAS,EAAE;IACzB,IAAIT,KAAK,GAAG,IAAI,CAACJ,OAAO,CAACC,MAAM,CAAC;IAChC,IAAIY,SAAS,EAAE;MACX,IAAI,CAACjB,MAAM,CAACkB,MAAM,CAACV,KAAK,EAAE,CAAC,CAAC;IAChC,CAAC,MACI;MACD,IAAI,CAACR,MAAM,CAACQ,KAAK,CAAC,CAACI,MAAM,EAAE;IAC/B;IACAd,YAAY,CAACgB,OAAO,CAAC,aAAa,EAAEb,IAAI,CAACc,SAAS,CAAC,IAAI,CAACf,MAAM,CAAC,CAAC;EACpE;EAEAmB,KAAK,GAAG;IACJ,IAAI,CAACnB,MAAM,GAAG,EAAE;IAChBF,YAAY,CAACgB,OAAO,CAAC,aAAa,EAAEb,IAAI,CAACc,SAAS,CAAC,IAAI,CAACf,MAAM,CAAC,CAAC;EACpE;EAEA,IAAIoB,KAAK,GAAG;IACR,OAAO,IAAI,CAACpB,MAAM;EACtB;EAEA,IAAIqB,QAAQ,GAAG;IACX,IAAIC,KAAK,GAAG,CAAC;IACb,IAAI,CAACtB,MAAM,CAACM,GAAG,CAAEC,CAAC,IAAK;MACnBe,KAAK,IAAIf,CAAC,CAACE,IAAI,CAACc,KAAK,GAAGhB,CAAC,CAACK,MAAM;IACpC,CAAC,CAAC;IACF,OAAOU,KAAK;EAChB;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}