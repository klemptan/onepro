{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/jhokipery/Documents/works/onepro/onepro/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/jhokipery/Documents/works/onepro/onepro/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/jhokipery/Documents/works/onepro/onepro/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{makeAutoObservable,toJS}from\"mobx\";var BasketStore=/*#__PURE__*/function(){function BasketStore(){_classCallCheck(this,BasketStore);var basketInLS=localStorage.getItem('basketGoods');if(basketInLS){this._goods=JSON.parse(basketInLS);}else{this._goods=[];}this._totalSum=0;var favorites=localStorage.getItem('favorites');if(favorites){this._favorites=JSON.parse(favorites);}else{this._favorites=[];}makeAutoObservable(this);}_createClass(BasketStore,[{key:\"indexOf\",value:function indexOf(goodId){for(var i=0;i<this._goods.length;i++){if(this._goods[i].good.id==goodId){return i;}}return-1;}},{key:\"setGood\",value:function setGood(good){var index=this.indexOf(good.id);if(index!=-1){this._goods[index].amount++;}else{this._goods.push({good:good,amount:1});}localStorage.setItem('basketGoods',JSON.stringify(this._goods));}},{key:\"unsetGood\",value:function unsetGood(goodId,unsetFull){var index=this.indexOf(goodId);if(unsetFull){this._goods.splice(index,1);}else{this._goods[index].amount--;if(this._goods[index].amount===0){this._goods.splice(index,1);}}localStorage.setItem('basketGoods',JSON.stringify(this._goods));}},{key:\"empty\",value:function empty(){this._goods=[];localStorage.setItem('basketGoods',JSON.stringify(this._goods));}},{key:\"isFavorite\",value:function isFavorite(goodId){for(var i=0;i<this._favorites.length;i++){if(this._favorites[i].id==goodId){return true;}}return false;}},{key:\"setFavoriteGood\",value:function setFavoriteGood(good){this._favorites.push(good);localStorage.setItem('favorites',JSON.stringify(this._favorites));}},{key:\"unsetFavoriteGood\",value:function unsetFavoriteGood(goodId){var index=-1;for(var i=0;i<this._favorites.length;i++){if(this._favorites[i].id==goodId){index=i;break;}}this._favorites.splice(index,1);localStorage.setItem('favorites',JSON.stringify(this._favorites));}},{key:\"favorites\",get:function get(){return this._favorites;}},{key:\"totalCount\",get:function get(){var counter=0;var _iterator=_createForOfIteratorHelper(this._goods),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;counter+=item.amount;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return counter;}},{key:\"goods\",get:function get(){return this._goods;}},{key:\"totalSum\",get:function get(){var total=0;this._goods.map(function(m){total+=m.good.price*m.amount;});return total;}},{key:\"isEmpty\",get:function get(){return this.totalCount==0;}}]);return BasketStore;}();export{BasketStore as default};","map":{"version":3,"names":["makeAutoObservable","toJS","BasketStore","basketInLS","localStorage","getItem","_goods","JSON","parse","_totalSum","favorites","_favorites","goodId","i","length","good","id","index","indexOf","amount","push","setItem","stringify","unsetFull","splice","counter","item","total","map","m","price","totalCount"],"sources":["C:/Users/jhokipery/Documents/works/onepro/onepro/client/src/store/BasketStore.js"],"sourcesContent":["import { makeAutoObservable, toJS } from \"mobx\"\r\n\r\nexport default class BasketStore {\r\n    constructor() {\r\n        let basketInLS = localStorage.getItem('basketGoods')\r\n        if (basketInLS) {\r\n            this._goods = JSON.parse(basketInLS)\r\n        }\r\n        else {\r\n            this._goods = []\r\n        }\r\n        this._totalSum = 0\r\n\r\n        let favorites = localStorage.getItem('favorites')\r\n        if(favorites) {\r\n            this._favorites = JSON.parse(favorites)\r\n        }\r\n        else {\r\n            this._favorites = []\r\n        }\r\n\r\n        makeAutoObservable(this)\r\n    }\r\n\r\n    indexOf(goodId) {\r\n        for(var i=0;i<this._goods.length;i++){\r\n            if(this._goods[i].good.id==goodId) {\r\n                return i;\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    setGood(good) {\r\n        let index = this.indexOf(good.id)\r\n        if (index != -1) {\r\n            this._goods[index].amount++\r\n        }\r\n        else {\r\n            this._goods.push({\r\n                good: good,\r\n                amount: 1\r\n            })\r\n        }\r\n        localStorage.setItem('basketGoods', JSON.stringify(this._goods))\r\n    }\r\n\r\n    unsetGood(goodId, unsetFull) {\r\n        let index = this.indexOf(goodId)\r\n        if (unsetFull) {\r\n            this._goods.splice(index, 1)\r\n        }\r\n        else {\r\n            this._goods[index].amount--\r\n            if(this._goods[index].amount===0) {\r\n                this._goods.splice(index, 1)\r\n            }\r\n        }\r\n        localStorage.setItem('basketGoods', JSON.stringify(this._goods))\r\n    }\r\n\r\n    empty() {\r\n        this._goods = []\r\n        localStorage.setItem('basketGoods', JSON.stringify(this._goods))\r\n    }\r\n\r\n    isFavorite(goodId){\r\n        for(var i=0;i<this._favorites.length;i++){\r\n            if(this._favorites[i].id==goodId) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setFavoriteGood(good) {\r\n        this._favorites.push(good)\r\n        localStorage.setItem('favorites', JSON.stringify(this._favorites))\r\n    }\r\n    unsetFavoriteGood(goodId){\r\n        let index=-1;\r\n        for(var i=0;i<this._favorites.length;i++){\r\n            if(this._favorites[i].id==goodId) {\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n        this._favorites.splice(index, 1)\r\n        localStorage.setItem('favorites', JSON.stringify(this._favorites))\r\n    }\r\n\r\n    get favorites(){\r\n        return this._favorites\r\n    }\r\n\r\n    get totalCount() {\r\n        let counter=0\r\n        for(var item of this._goods){\r\n            counter+=item.amount\r\n        }\r\n        return counter;\r\n    }\r\n\r\n    get goods() {\r\n        return this._goods\r\n    }\r\n\r\n    get totalSum() {\r\n        let total = 0\r\n        this._goods.map((m) => {\r\n            total += m.good.price * m.amount\r\n        })\r\n        return total\r\n    }\r\n\r\n    get isEmpty(){\r\n        return this.totalCount==0\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}