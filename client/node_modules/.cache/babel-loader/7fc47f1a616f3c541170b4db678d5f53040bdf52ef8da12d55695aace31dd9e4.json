{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/jhokipery/Documents/works/onepro/onepro/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/jhokipery/Documents/works/onepro/onepro/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/jhokipery/Documents/works/onepro/onepro/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{makeAutoObservable,toJS}from\"mobx\";var BasketStore=/*#__PURE__*/function(){function BasketStore(){_classCallCheck(this,BasketStore);var inLS=localStorage.getItem('basketGoods');if(inLS){this._goods=JSON.parse(inLS);}else{this._goods=[];}this._totalSum=0;makeAutoObservable(this);}_createClass(BasketStore,[{key:\"indexOf\",value:function indexOf(goodId){for(var i=0;i<this._goods.length;i++){if(this._goods[i].good.id==goodId){return i;}}return-1;}},{key:\"setGood\",value:function setGood(good){var index=this.indexOf(good.id);if(index!=-1){this._goods[index].amount++;}else{this._goods.push({good:good,amount:1});}localStorage.setItem('basketGoods',JSON.stringify(this._goods));}},{key:\"unsetGood\",value:function unsetGood(goodId,unsetFull){var index=this.indexOf(goodId);if(unsetFull){this._goods.splice(index,1);}else{this._goods[index].amount--;if(this._goods[index].amount===0){this._goods.splice(index,1);}}localStorage.setItem('basketGoods',JSON.stringify(this._goods));}},{key:\"empty\",value:function empty(){this._goods=[];localStorage.setItem('basketGoods',JSON.stringify(this._goods));}},{key:\"totalCount\",get:function get(){var counter=0;var _iterator=_createForOfIteratorHelper(this._goods),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;counter+=item.amount;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return counter;}},{key:\"goods\",get:function get(){return this._goods;}},{key:\"totalSum\",get:function get(){var total=0;this._goods.map(function(m){total+=m.good.price*m.amount;});return total;}},{key:\"isEmpty\",get:function get(){return this.totalCount==0;}}]);return BasketStore;}();export{BasketStore as default};","map":{"version":3,"names":["makeAutoObservable","toJS","BasketStore","inLS","localStorage","getItem","_goods","JSON","parse","_totalSum","goodId","i","length","good","id","index","indexOf","amount","push","setItem","stringify","unsetFull","splice","counter","item","total","map","m","price","totalCount"],"sources":["C:/Users/jhokipery/Documents/works/onepro/onepro/client/src/store/BasketStore.js"],"sourcesContent":["import { makeAutoObservable, toJS } from \"mobx\"\n\nexport default class BasketStore {\n    constructor() {\n        let inLS = localStorage.getItem('basketGoods')\n        if (inLS) {\n            this._goods = JSON.parse(inLS)\n        }\n        else {\n            this._goods = []\n        }\n        this._totalSum = 0\n        makeAutoObservable(this)\n    }\n\n    indexOf(goodId) {\n        for(var i=0;i<this._goods.length;i++){\n            if(this._goods[i].good.id==goodId) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    setGood(good) {\n        let index = this.indexOf(good.id)\n        if (index != -1) {\n            this._goods[index].amount++\n        }\n        else {\n            this._goods.push({\n                good: good,\n                amount: 1\n            })\n        }\n        localStorage.setItem('basketGoods', JSON.stringify(this._goods))\n    }\n\n    unsetGood(goodId, unsetFull) {\n        let index = this.indexOf(goodId)\n        if (unsetFull) {\n            this._goods.splice(index, 1)\n        }\n        else {\n            this._goods[index].amount--\n            if(this._goods[index].amount===0) {\n                this._goods.splice(index, 1)\n            }\n        }\n        localStorage.setItem('basketGoods', JSON.stringify(this._goods))\n    }\n\n    empty() {\n        this._goods = []\n        localStorage.setItem('basketGoods', JSON.stringify(this._goods))\n    }\n\n    get totalCount() {\n        let counter=0\n        for(var item of this._goods){\n            counter+=item.amount\n        }\n        return counter;\n    }\n\n    get goods() {\n        return this._goods\n    }\n\n    get totalSum() {\n        let total = 0\n        this._goods.map((m) => {\n            total += m.good.price * m.amount\n        })\n        return total\n    }\n\n    get isEmpty(){\n        return this.totalCount==0\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}