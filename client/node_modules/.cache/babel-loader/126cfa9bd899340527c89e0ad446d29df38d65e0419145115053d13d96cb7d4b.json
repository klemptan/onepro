{"ast":null,"code":"import { makeAutoObservable, toJS } from \"mobx\";\nexport default class BasketStore {\n  constructor() {\n    let inLS = localStorage.getItem('basketGoods');\n    if (inLS) {\n      this._goods = JSON.parse(inLS);\n    } else {\n      this._goods = [];\n    }\n    makeAutoObservable(this);\n  }\n  indexOf(goodId) {\n    for (var i = 0; i < this._goods.length; i++) {\n      if (this._goods[i].good.id == goodId) return i;\n    }\n    return -1;\n  }\n  setGood(good) {\n    let index = this.indexOf(good.id);\n    if (index != -1) {\n      this._goods[index].amount++;\n    } else {\n      this._goods.push({\n        good: good,\n        amount: 1\n      });\n    }\n    localStorage.setItem('basketGoods', JSON.stringify(this._goods));\n  }\n  unsetGood(goodId, unsetFull) {\n    let index = this.indexOf(goodId);\n    if (unsetFull) {\n      this._goods.splice(index, 1);\n    } else {\n      this._goods[index].amount--;\n    }\n    localStorage.setItem('basketGoods', JSON.stringify(this._goods));\n  }\n  empty() {\n    this._goods = [];\n    localStorage.setItem('basketGoods', JSON.stringify(this._goods));\n  }\n  get goods() {\n    return this._goods;\n  }\n}","map":{"version":3,"names":["makeAutoObservable","toJS","BasketStore","constructor","inLS","localStorage","getItem","_goods","JSON","parse","indexOf","goodId","i","length","good","id","setGood","index","amount","push","setItem","stringify","unsetGood","unsetFull","splice","empty","goods"],"sources":["C:/Users/jhokipery/Documents/works/onepro/onepro/client/src/store/BasketStore.js"],"sourcesContent":["import { makeAutoObservable, toJS } from \"mobx\"\n\nexport default  class BasketStore{\n    constructor() {\n        let inLS = localStorage.getItem('basketGoods')\n        if(inLS){\n            this._goods=JSON.parse(inLS)\n        }\n        else {\n            this._goods=[]\n        }\n        makeAutoObservable(this)\n    }\n\n    indexOf(goodId) {\n        for(var i=0; i<this._goods.length;i++){\n            if(this._goods[i].good.id==goodId)\n                return i;\n        }\n        return -1;\n    }\n    \n    setGood(good){\n        let index = this.indexOf(good.id)\n        if(index!=-1){\n            this._goods[index].amount++\n        }\n        else {\n            this._goods.push({\n                good:good,\n                amount:1\n            })\n        }\n        localStorage.setItem('basketGoods',JSON.stringify(this._goods))\n    }\n\n    unsetGood(goodId,unsetFull){\n        let index = this.indexOf(goodId)\n        if(unsetFull) {\n            this._goods.splice(index,1)\n        }\n        else {\n            this._goods[index].amount--\n        }\n        localStorage.setItem('basketGoods',JSON.stringify(this._goods))\n    }\n\n    empty(){\n        this._goods = []\n        localStorage.setItem('basketGoods',JSON.stringify(this._goods))\n    }\n    \n\n    \n\n    get goods(){\n        return this._goods\n    }\n\n\n}"],"mappings":"AAAA,SAASA,kBAAkB,EAAEC,IAAI,QAAQ,MAAM;AAE/C,eAAgB,MAAMC,WAAW;EAC7BC,WAAW,GAAG;IACV,IAAIC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;IAC9C,IAAGF,IAAI,EAAC;MACJ,IAAI,CAACG,MAAM,GAACC,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC;IAChC,CAAC,MACI;MACD,IAAI,CAACG,MAAM,GAAC,EAAE;IAClB;IACAP,kBAAkB,CAAC,IAAI,CAAC;EAC5B;EAEAU,OAAO,CAACC,MAAM,EAAE;IACZ,KAAI,IAAIC,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC,IAAI,CAACL,MAAM,CAACM,MAAM,EAACD,CAAC,EAAE,EAAC;MAClC,IAAG,IAAI,CAACL,MAAM,CAACK,CAAC,CAAC,CAACE,IAAI,CAACC,EAAE,IAAEJ,MAAM,EAC7B,OAAOC,CAAC;IAChB;IACA,OAAO,CAAC,CAAC;EACb;EAEAI,OAAO,CAACF,IAAI,EAAC;IACT,IAAIG,KAAK,GAAG,IAAI,CAACP,OAAO,CAACI,IAAI,CAACC,EAAE,CAAC;IACjC,IAAGE,KAAK,IAAE,CAAC,CAAC,EAAC;MACT,IAAI,CAACV,MAAM,CAACU,KAAK,CAAC,CAACC,MAAM,EAAE;IAC/B,CAAC,MACI;MACD,IAAI,CAACX,MAAM,CAACY,IAAI,CAAC;QACbL,IAAI,EAACA,IAAI;QACTI,MAAM,EAAC;MACX,CAAC,CAAC;IACN;IACAb,YAAY,CAACe,OAAO,CAAC,aAAa,EAACZ,IAAI,CAACa,SAAS,CAAC,IAAI,CAACd,MAAM,CAAC,CAAC;EACnE;EAEAe,SAAS,CAACX,MAAM,EAACY,SAAS,EAAC;IACvB,IAAIN,KAAK,GAAG,IAAI,CAACP,OAAO,CAACC,MAAM,CAAC;IAChC,IAAGY,SAAS,EAAE;MACV,IAAI,CAAChB,MAAM,CAACiB,MAAM,CAACP,KAAK,EAAC,CAAC,CAAC;IAC/B,CAAC,MACI;MACD,IAAI,CAACV,MAAM,CAACU,KAAK,CAAC,CAACC,MAAM,EAAE;IAC/B;IACAb,YAAY,CAACe,OAAO,CAAC,aAAa,EAACZ,IAAI,CAACa,SAAS,CAAC,IAAI,CAACd,MAAM,CAAC,CAAC;EACnE;EAEAkB,KAAK,GAAE;IACH,IAAI,CAAClB,MAAM,GAAG,EAAE;IAChBF,YAAY,CAACe,OAAO,CAAC,aAAa,EAACZ,IAAI,CAACa,SAAS,CAAC,IAAI,CAACd,MAAM,CAAC,CAAC;EACnE;EAKA,IAAImB,KAAK,GAAE;IACP,OAAO,IAAI,CAACnB,MAAM;EACtB;AAGJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}