{"ast":null,"code":"import React,{useContext,useEffect}from'react';import SideBar from\"../components/CategoryPage/SideBar\";import MyBreadcrumbs from\"../components/CategoryPage/MyBreadcrumbs\";import{fetchCategories,fetchGoods,fetchBrands}from\"../http/shopAPI\";import{Context}from\"../index\";import GoodsList from\"../components/CategoryPage/GoodsList\";import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Catalog=function Catalog(){var _useContext=useContext(Context),good=_useContext.good;var params=useParams();useEffect(function(){fetchCategories(params.id).then(function(data){good.setCategories(data);if(params.id!==0){var caregoryName=good.getCategoryNameById(params.id);good.setBreadcrumbsLinks([{title:'Главная',link:'/',active:false},{title:'Каталог',link:'/catalog',active:false},{title:caregoryName,link:'/catalog/category/'+params.id,active:true}]);}});fetchGoods(params.id).then(function(data){return good.setGoods(data);});fetchBrands().then(function(data){return good.setBrands(data);});document.getElementsByTagName('footer')[0].classList.add('catalog-footer');var isOnDiv=false;var sidebar_div=document.getElementById(\"mCSB_1_container\");sidebar_div.addEventListener(\"mouseenter\",function(){isOnDiv=true;console.log('in');});sidebar_div.addEventListener(\"mouseleave\",function(){isOnDiv=false;console.log('out');});window.addEventListener('scroll',function(e){if(isOnDiv){sidebar_div.style.top=\"-\".concat(sidebar_div.pageYOffset,\"px\");}});},[]);return/*#__PURE__*/_jsxs(\"main\",{className:\"catalog-main\",children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"update-main\",children:[/*#__PURE__*/_jsx(MyBreadcrumbs,{}),/*#__PURE__*/_jsx(GoodsList,{})]})})]});};export default Catalog;","map":{"version":3,"names":["React","useContext","useEffect","SideBar","MyBreadcrumbs","fetchCategories","fetchGoods","fetchBrands","Context","GoodsList","useParams","Catalog","good","params","id","then","data","setCategories","caregoryName","getCategoryNameById","setBreadcrumbsLinks","title","link","active","setGoods","setBrands","document","getElementsByTagName","classList","add","isOnDiv","sidebar_div","getElementById","addEventListener","console","log","window","e","style","top","pageYOffset"],"sources":["C:/Users/jhokipery/Documents/works/onepro/onepro/client/src/pages/Catalog.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\r\nimport SideBar from \"../components/CategoryPage/SideBar\";\r\nimport MyBreadcrumbs from \"../components/CategoryPage/MyBreadcrumbs\";\r\nimport { fetchCategories, fetchGoods, fetchBrands } from \"../http/shopAPI\";\r\nimport { Context } from \"../index\";\r\nimport GoodsList from \"../components/CategoryPage/GoodsList\";\r\nimport { useParams } from 'react-router-dom';\r\n\r\nconst Catalog = () => {\r\n    const { good } = useContext(Context)\r\n    const params = useParams()\r\n\r\n    useEffect(() => {\r\n        fetchCategories(params.id).then((data) => {\r\n            good.setCategories(data)\r\n\r\n            if (params.id !== 0) {\r\n                const caregoryName = good.getCategoryNameById(params.id)\r\n                good.setBreadcrumbsLinks([\r\n                    { title: 'Главная', link: '/', active: false },\r\n                    { title: 'Каталог', link: '/catalog', active: false },\r\n                    { title: caregoryName, link: '/catalog/category/' + params.id, active:true }\r\n                ])\r\n            }\r\n        })\r\n\r\n        fetchGoods(params.id).then(data => good.setGoods(data))\r\n\r\n        fetchBrands().then(data => good.setBrands(data))\r\n\r\n        document.getElementsByTagName('footer')[0].classList.add('catalog-footer')\r\n\r\n        var isOnDiv = false;\r\n        const sidebar_div = document.getElementById(\"mCSB_1_container\")\r\n        sidebar_div.addEventListener(\"mouseenter\", function () {\r\n            isOnDiv = true;\r\n            console.log('in')\r\n        });\r\n        sidebar_div.addEventListener(\"mouseleave\", function () { isOnDiv = false; console.log('out') });\r\n\r\n\r\n        window.addEventListener('scroll', (e) => {\r\n            if (isOnDiv) {\r\n                sidebar_div.style.top = `-${sidebar_div.pageYOffset}px`\r\n            }\r\n        })\r\n\r\n    }, [])\r\n\r\n    return (\r\n        <main className=\"catalog-main\">\r\n            <SideBar />\r\n            <div className=\"main\">\r\n                <div className=\"update-main\">\r\n                    <MyBreadcrumbs />\r\n                    <GoodsList />\r\n                </div>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Catalog;"],"mappings":"AAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CACpD,MAAOC,QAAO,KAAM,oCAAoC,CACxD,MAAOC,cAAa,KAAM,0CAA0C,CACpE,OAASC,eAAe,CAAEC,UAAU,CAAEC,WAAW,KAAQ,iBAAiB,CAC1E,OAASC,OAAO,KAAQ,UAAU,CAClC,MAAOC,UAAS,KAAM,sCAAsC,CAC5D,OAASC,SAAS,KAAQ,kBAAkB,CAAC,wFAE7C,GAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,CAClB,gBAAiBV,UAAU,CAACO,OAAO,CAAC,CAA5BI,IAAI,aAAJA,IAAI,CACZ,GAAMC,OAAM,CAAGH,SAAS,EAAE,CAE1BR,SAAS,CAAC,UAAM,CACZG,eAAe,CAACQ,MAAM,CAACC,EAAE,CAAC,CAACC,IAAI,CAAC,SAACC,IAAI,CAAK,CACtCJ,IAAI,CAACK,aAAa,CAACD,IAAI,CAAC,CAExB,GAAIH,MAAM,CAACC,EAAE,GAAK,CAAC,CAAE,CACjB,GAAMI,aAAY,CAAGN,IAAI,CAACO,mBAAmB,CAACN,MAAM,CAACC,EAAE,CAAC,CACxDF,IAAI,CAACQ,mBAAmB,CAAC,CACrB,CAAEC,KAAK,CAAE,SAAS,CAAEC,IAAI,CAAE,GAAG,CAAEC,MAAM,CAAE,KAAM,CAAC,CAC9C,CAAEF,KAAK,CAAE,SAAS,CAAEC,IAAI,CAAE,UAAU,CAAEC,MAAM,CAAE,KAAM,CAAC,CACrD,CAAEF,KAAK,CAAEH,YAAY,CAAEI,IAAI,CAAE,oBAAoB,CAAGT,MAAM,CAACC,EAAE,CAAES,MAAM,CAAC,IAAK,CAAC,CAC/E,CAAC,CACN,CACJ,CAAC,CAAC,CAEFjB,UAAU,CAACO,MAAM,CAACC,EAAE,CAAC,CAACC,IAAI,CAAC,SAAAC,IAAI,QAAIJ,KAAI,CAACY,QAAQ,CAACR,IAAI,CAAC,GAAC,CAEvDT,WAAW,EAAE,CAACQ,IAAI,CAAC,SAAAC,IAAI,QAAIJ,KAAI,CAACa,SAAS,CAACT,IAAI,CAAC,GAAC,CAEhDU,QAAQ,CAACC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAACC,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAE1E,GAAIC,QAAO,CAAG,KAAK,CACnB,GAAMC,YAAW,CAAGL,QAAQ,CAACM,cAAc,CAAC,kBAAkB,CAAC,CAC/DD,WAAW,CAACE,gBAAgB,CAAC,YAAY,CAAE,UAAY,CACnDH,OAAO,CAAG,IAAI,CACdI,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC,CACrB,CAAC,CAAC,CACFJ,WAAW,CAACE,gBAAgB,CAAC,YAAY,CAAE,UAAY,CAAEH,OAAO,CAAG,KAAK,CAAEI,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAG/FC,MAAM,CAACH,gBAAgB,CAAC,QAAQ,CAAE,SAACI,CAAC,CAAK,CACrC,GAAIP,OAAO,CAAE,CACTC,WAAW,CAACO,KAAK,CAACC,GAAG,YAAOR,WAAW,CAACS,WAAW,MAAI,CAC3D,CACJ,CAAC,CAAC,CAEN,CAAC,CAAE,EAAE,CAAC,CAEN,mBACI,cAAM,SAAS,CAAC,cAAc,wBAC1B,KAAC,OAAO,IAAG,cACX,YAAK,SAAS,CAAC,MAAM,uBACjB,aAAK,SAAS,CAAC,aAAa,wBACxB,KAAC,aAAa,IAAG,cACjB,KAAC,SAAS,IAAG,GACX,EACJ,GACH,CAEf,CAAC,CAED,cAAe7B,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}